# MDBoot (boot-file) üíæ
## –ó–∞–ø—É—Å–∫ —ç–º—É–ª—è—Ç–æ—Ä–∞ ‚ö°
–†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π —É–∂–µ –≤–∫–ª—é—á–∞–µ—Ç –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ —Ñ–∞–π–ª—ã. –ß—Ç–æ–±—ã –∑–∞–ø—É—Å—Ç–∏—Ç—å –∑–∞–≥—Ä—É–∑—á–∏–∫:
- –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Ñ–∞–π–ª "bochs.exe"
- –í –æ—Ç–∫—Ä—ã—à–µ–º—Å—è –æ–∫–Ω–µ –Ω–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É "Load"
- –í—ã–±–µ—Ä–∏—Ç–µ –≤ –∫–∞—á–µ—Å—Ç–≤–µ —Ñ–∞–π–ª–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π —Ñ–∞–π–ª "bochsrc"
- –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É "Start"

## –§–∞–π–ª—ã —ç–º—É–ª—è—Ç–æ—Ä–∞ üìë
- bochs.exe - —ç–º—É–ª—è—Ç–æ—Ä
- bochsdbg.exe - —ç–º—É–ª—è—Ç–æ—Ä —Å –¥–µ–±–∞–≥–≥–µ—Ä–æ–º
- bochsrc - —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
- bochsrc_dbg - –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–ª—è –¥–µ–±–∞–≥–≥–µ—Ä–∞
- boot.ASM - –Ω–µ—Å–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–æ–¥ –∑–∞–≥—Ä—É–∑—á–∏–∫–∞
- boot.BIN - —Å–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–æ–¥ –∑–∞–≥—Ä—É–∑—á–∏–∫–∞
- disk.img - –∑–∞–≥—Ä—É–∑–æ—á–Ω—ã–π –æ–±—Ä–∞–∑
- FASMW.exe - —Ä–µ–¥–∞–∫—Ç–æ—Ä –∫–æ–¥–∞
- writeDisk.bat - –æ–ø–µ—Ä–∏—Ä—É–µ—Ç —É—Ç–∏–ª–∏—Ç–∞–º–∏ dd –∏ fsutil —Å —Ü–µ–ª—å—é —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–≥—Ä—É–∑–æ—á–Ω–æ–≥–æ –æ–±—Ä–∞–∑–∞

## –ú–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏—è –ø—Ä–æ–≥—Ä–∞–º–º–Ω–æ–≥–æ –∫–æ–¥–∞ üîß
–î–ª—è –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏–∏ –ø—Ä–æ–≥—Ä–∞–º–º–Ω–æ–≥–æ –∫–æ–¥–∞:
- –ó–∞–ø—É—Å—Ç–∏—Ç–µ FASMW (–∏–ª–∏ –ª—é–±—É—é –¥—Ä—É–≥—É—é –ø—Ä–æ–≥—Ä–∞–º–º—É, –∫–æ—Ç–æ—Ä–∞—è –º–æ–∂–µ—Ç —Å–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞—Ç—å —Ñ–∞–π–ª)
- –û—Ç–∫—Ä–æ–π—Ç–µ —Ñ–∞–π–ª boot.ASM
- –í–Ω–µ—Å–∏—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∫–æ–¥
- –°–∫–æ–º–ø–∏–ª–∏—Ä—É–π—Ç–µ –µ–≥–æ (–≤ FASMW "Run" -> "Compile")
- –ó–∞–ø—É—Å—Ç–∏—Ç–µ writeDisk.bat
- –î–æ–∂–¥–∏—Ç–µ—Å—å –æ–∫–æ–Ω—á–∞–Ω–∏—è –ø—Ä–æ—Ü–µ—Å—Å–∞ (—Ñ–∞–π–ª disk.img —Å–∞–º –ø–µ—Ä–µ–∑–∞–ø–∏—à–µ—Ç—Å—è)
- –ó–∞–ø—É—Å—Ç–∏—Ç–µ —ç–º—É–ª—è—Ç–æ—Ä –∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –≤–∞—à—É —Ä–∞–∑—Ä–∞–±–æ—Ç–∫—É

## –î–µ–±–∞–≥–≥–∏–Ω–≥ –ø—Ä–æ–≥—Ä–∞–º–º–Ω–æ–≥–æ –∫–æ–¥–∞ üîé
–î–ª—è –ø—Ä–æ–≤–µ–¥–µ–Ω–∏—è –ø—Ä–æ—Ü–µ–¥—É—Ä—ã –¥–µ–±–∞–≥–≥–∏–Ω–≥–∞ –∫–æ–¥–∞:
- –ó–∞–ø—É—Å—Ç–∏—Ç–µ FASMW (–∏–ª–∏ –ª—é–±—É—é –¥—Ä—É–≥—É—é –ø—Ä–æ–≥—Ä–∞–º–º—É, –∫–æ—Ç–æ—Ä–∞—è –º–æ–∂–µ—Ç —Å–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞—Ç—å —Ñ–∞–π–ª)
- –û—Ç–∫—Ä–æ–π—Ç–µ —Ñ–∞–π–ª boot.ASM
- –í –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ–µ –º–µ—Å—Ç–æ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –±—Ä–µ–π–∫–ø–æ–∏–Ω—Ç (–≤–ø–∏—à–∏—Ç–µ 'xchg bx, bx')
- –°–∫–æ–º–ø–∏–ª–∏—Ä—É–π—Ç–µ –µ–≥–æ (–≤ FASMW "Run" -> "Compile")
- –ó–∞–ø—É—Å—Ç–∏—Ç–µ writeDisk.bat
- –î–æ–∂–¥–∏—Ç–µ—Å—å –æ–∫–æ–Ω—á–∞–Ω–∏—è –ø—Ä–æ—Ü–µ—Å—Å–∞ (—Ñ–∞–π–ª disk.img —Å–∞–º –ø–µ—Ä–µ–∑–∞–ø–∏—à–µ—Ç—Å—è)
- –ó–∞–ø—É—Å—Ç–∏—Ç–µ —ç–º—É–ª—è—Ç–æ—Ä (!bochsdbg), –≤ –∫–∞—á–µ—Å—Ç–≤–µ —Ñ–∞–π–ª–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –≤—ã–±–µ—Ä–∏—Ç–µ borchs_dbg –∏ –ø—Ä–æ–≤–æ–¥–∏—Ç–µ –ø—Ä–æ—Ü–µ–¥—É—Ä—É –æ—Ç–ª–∞–¥–∫–∏ (–¥–ª—è –ø–µ—Ä–µ—Ö–æ–¥–∞ –∫ —Ç–æ—á–∫–µ –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ –Ω–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É 'Continue', –¥–ª—è –µ–¥–∏–Ω–∏—á–Ω–æ–≥–æ —à–∞–≥–∞ –Ω–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É 'Step')

## –û–ø–∏—Å–∞–Ω–∏–µ –±–ª–æ–∫–æ–≤ (–ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ –æ—Ç –Ω–∞—á–∞–ª–∞ –ø—Ä–æ–≥—Ä–∞–º–º—ã –∫ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—é) üìö
- boot__code16 - –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–∞—è —á–∞—Å—Ç—å –∑–∞–≥—Ä—É–∑—á–∏–∫–∞
- boot__continuation - –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–≥—Ä—É–∑–æ—á–Ω–æ–≥–æ –∫–æ–¥–∞ –ø–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–π —á–∞—Å—Ç–∏
- timer__int - –∫–æ–¥ –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏—è —Ç–∞–π–º–µ—Ä–∞
- convert__timer__value - –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏—è: –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è —Ç–∞–π–º–µ—Ä–∞ –≤ —Å—Ç—Ä–æ–∫—É —Ü–∏—Ñ—Ä
- timer__value__out - –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏—è: –≤—ã–≤–æ–¥ —Å–∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–π —Å—Ç—Ä–æ–∫–∏ —Ç–∞–π–º–µ—Ä–∞
- keyboard__int - –∫–æ–¥ –ø—Ä–µ—Ä–≤—ã–≤–∞–Ω–∏—è –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã
- reboot - –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏—è: –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏ —ç–º—É–ª—è—Ç–æ—Ä–∞ (Ctrl+Break)
- no__reboot - –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏—è: –±–µ–∑ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏ —ç–º—É–ª—è—Ç–æ—Ä–∞
- ints__install - —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏–π
- clear__display - –æ—á–∏—Å—Ç–∫–∞ –¥–∏—Å–ø–ª–µ—è
- welcome - –≤—ã–≤–æ–¥ –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è
- check__floppy - –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –Ω–∞–ª–∏—á–∏–µ floppy-–ø—Ä–∏–≤–æ–¥–∞
- have__floppy - –µ—Å–ª–∏ floppy-–ø—Ä–∏–≤–æ–¥ –ø–æ–¥–∫–ª—é—á—ë–Ω
- have__floppy__out - –≤—ã–≤–æ–¥ —Å–æ–æ–±—â–µ–Ω–∏—è –æ –ø–æ–¥–∫–ª—é—á—ë–Ω–Ω–æ–º floppy-–ø—Ä–∏–≤–æ–¥–µ
- no__floppy - –µ—Å–ª–∏ floppy-–ø—Ä–∏–≤–æ–¥ –Ω–µ –ø–æ–¥–∫–ª—é—á—ë–Ω
- no__floppy__out -  –≤—ã–≤–æ–¥ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ floppy-–ø—Ä–∏–≤–æ–¥–µ
- check__coprocessor - –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –Ω–∞–ª–∏—á–∏–µ —Å–æ–ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞
- have__coprocessor - –µ—Å–ª–∏ —Å–æ–ø—Ä–æ—Ü–µ—Å—Å–æ—Ä —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
- have__coprocessor__out - –≤—ã–≤–æ–¥ —Å–æ–æ–±—â–µ–Ω–∏—è –æ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω–æ–º —Å–æ–ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–µ
- no__coprocessor - –µ—Å–ª–∏ —Å–æ–ø—Ä–æ—Ü–µ—Å—Å–æ—Ä –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
- no__coprocessor__out - –≤—ã–≤–æ–¥ —Å–æ–æ–±—â–µ–Ω–∏—è –æ –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω–æ–º —Å–æ–ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–µ
- check__ram__size - –ø—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –æ–ø–µ—Ä–∞—Ç–∏–≤–Ω–æ–π –ø–∞–º—è—Ç–∏
- ram__size__out - –≤—ã–≤–æ–¥ –ø—Ä–µ—Ñ–∏–∫—Å–∞
- ram__size__value__out - –≤—ã–≤–æ–¥ –∑–Ω–∞—á–µ–Ω–∏—è
- check__video__mode - –ø—Ä–æ–≤–µ—Ä–∫–∞ –≤–∏–¥–µ–æ—Ä–µ–∂–∏–º–∞
- video__mode__out - –≤—ã–≤–æ–¥ –ø—Ä–µ—Ñ–∏–∫—Å–∞
- check__mode__40x25__color - –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ —Ä–µ–∂–∏–º—ã (–≤ –Ω–∞–∑–≤–∞–Ω–∏–∏ –±–ª–æ–∫–∞ –¥–æ–ø—É—â–µ–Ω–∞ –æ—à–∏–±–∫–∞, —ç—Ç–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –≤—Å–µ –≤–∏–¥–µ–æ—Ä–µ–∂–∏–º—ã, –∞ –Ω–µ —Ç–æ–ª—å–∫–æ "40x25 Color")
- mode__40x25__color__out - –≤—ã–≤–æ–¥ —Å–æ–æ–±—â–µ–Ω–∏—è –æ –≤–∏–¥–µ–æ—Ä–µ–∂–∏–º–µ "40x25 Color"
- mode__80x25__color__out - –≤—ã–≤–æ–¥ —Å–æ–æ–±—â–µ–Ω–∏—è –æ –≤–∏–¥–µ–æ—Ä–µ–∂–∏–º–µ "80x25 Color"
- mode__80x25__mono__out - –≤—ã–≤–æ–¥ —Å–æ–æ–±—â–µ–Ω–∏—è –æ –≤–∏–¥–µ–æ—Ä–µ–∂–∏–º–µ "80x25 Mono"
- check__number__of__floppy - –ø—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ floppy-–ø—Ä–∏–≤–æ–¥–æ–≤
- number__of__floppy__out - –≤—ã–≤–æ–¥ –ø—Ä–µ—Ñ–∏–∫—Å–∞
- number__of__floppy__value__out - –≤—ã–≤–æ–¥ –∑–Ω–∞—á–µ–Ω–∏—è
- check__dma - –ø—Ä–æ–≤–µ—Ä–∫–∞ DMA
- dma__enable - –µ—Å–ª–∏ DMA –≤–∫–ª—é—á—ë–Ω
- dma__enable__out - –≤—ã–≤–æ–¥ —Å–æ–æ–±—â–µ–Ω–∏—è –æ –≤–∫–ª—é—á—ë–Ω–Ω–æ–º DMA
- dma__disable - –µ—Å–ª–∏ DMA –≤—ã–∫–ª—é—á–µ–Ω
- dma__disable__out - –≤—ã–≤–æ–¥ —Å–æ–æ–±—â–µ–Ω–∏—è –æ –≤—ã–∫–ª—é—á–µ–Ω–Ω–æ–º DMA
- number__of__rs232__cards - –ø—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ RS-232 –∫–∞—Ä—Ç
- number__of__rs232__cards__out - –≤—ã–≤–æ–¥ –ø—Ä–µ—Ñ–∏–∫—Å–∞
- number__of__rs232__cards__value__out - –≤—ã–≤–æ–¥ –∑–Ω–∞—á–µ–Ω–∏—è
- check__game__port - –ø—Ä–æ–≤–µ—Ä–∫–∞ "Game port"
- game__port__enable - –µ—Å–ª–∏ "Game port" –≤–∫–ª—é—á–µ–Ω
- game__port__enable__out - –≤—ã–≤–æ–¥ —Å–æ–æ–±—â–µ–Ω–∏—è –æ –≤–∫–ª—é—á—ë–Ω–Ω–æ–º "Game port"
- game__port__disable - –µ—Å–ª–∏ "Game port" –≤—ã–∫–ª—é—á–µ–Ω
- game__port__disable__out - –≤—ã–≤–æ–¥ —Å–æ–æ–±—â–µ–Ω–∏—è –æ –≤—ã–∫–ª—é—á–µ–Ω–Ω–æ–º "Game port"
- check__internal__modem - –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è –≤—Å—Ç—Ä–æ–µ–Ω–Ω–æ–≥–æ –º–æ–¥–µ–º–∞
- internal__modem__installed - –µ—Å–ª–∏ –º–æ–¥–µ–º —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
- internal__modem__installed__out - –≤—ã–≤–æ–¥ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω–æ–º –º–æ–¥–µ–º–µ
- internal__modem__not__installed - –µ—Å–ª–∏ –º–æ–¥–µ–º –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
- internal__modem__not__installed__out - –≤—ã–≤–æ–¥ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –º–æ–¥–µ–º–∞
- number__of__printers__attached - –ø—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –ø–æ–¥–∫–ª—á—é—á—ë–Ω–Ω—ã—Ö –ø—Ä–∏–Ω—Ç–µ—Ä–æ–≤
- number__of__printers__attached__out - –≤—ã–≤–æ–¥ –ø—Ä–µ—Ñ–∏–∫—Å–∞
- number__of__printers__attached__value__out - –≤—ã–≤–æ–¥ –∑–Ω–∞—á–µ–Ω–∏—è
- card__map__header - –≤—ã–≤–æ–¥ –∑–∞–≥–æ–ª–æ–≤–∫–∞ –¥–ª—è —Ç–∞–±–ª–∏—Ü—ã —Å–µ–∫—Ç–æ—Ä–æ–≤ –∫–∞—Ä—Ç—ã –ø–∞–º—è—Ç–∏
- card__map__read__start - –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫ –ø–æ–ª—É—á–µ–Ω–∏—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Å–µ–∫—Ç–æ—Ä–∞—Ö
- card__map__reading - –ø–æ–ª—É—á–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Å–µ–∫—Ç–æ—Ä–∞—Ö –ø—Ä–∏ –ø–æ–º–æ—â–∏ int 0x15 ax = 0E820h
- base__addr__high__out - –≤—ã–≤–æ–¥ BaseAddrHigh
- base__addr__low__out - –≤—ã–≤–æ–¥ BaseAddrLow
- length__high__out - –≤—ã–≤–æ–¥ LengthHigh
- length__low__out - –≤—ã–≤–æ–¥ LengthLow
- type__is__arm - –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∏–ø–∞ –Ω–∞ "ARM"
- type__is__arr - –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∏–ø–∞ –Ω–∞ "ARR"
- type__is__udf - –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∏–ø–∞ –Ω–∞ "UDF" (undefined)
- type__out - –≤—ã–≤–æ–¥ —Ç–∏–ø–∞ –∏ –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –∑–∞–≤–µ—à–µ–Ω–∏–µ –ø—Ä–æ—Ü–µ—Å—Å–∞ —á—Ç–µ–Ω–∏—è
- terminate - –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è (–ø—Ä–µ—Ä—ã–≤–∞–Ω–∏—è —Ç–∞–π–º–µ—Ä–∞ –∏ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã –≤—Å—ë –µ—â—ë —Ä–∞–±–æ—Ç–∞—é—Ç)

## –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ üìã
–ë–æ–ª—å—à–∞—è  —á–∞—Å—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π —Å—Ç—Ä–æ–∫—É –∏ –µ—ë –¥–ª–∏–Ω–Ω—É. –í –¥–∞–Ω–Ω–æ–º –∑–∞–≥—Ä—É–∑—á–∏–∫–µ —ç—Ç–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —Å —Ü–µ–ª—å—é –≤—ã–≤–æ–¥–∞ –Ω–∞ —ç–∫—Ä–∞–Ω. –ü–æ—ç—Ç–æ–º—É –æ–ø–∏—Å–∞–Ω—ã –±—É–¥—É—Ç —Ç–æ–ª—å–∫–æ –≤—ã–¥–µ–ª—è—é—â–∏–µ—Å—è —Å—Ä–µ–¥–∏ –Ω–∏—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:
- buffer db 20 dup(?) - –±—É—Ñ–µ—Ä –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –æ —Å–µ–∫—Ç–æ—Ä–∞—Ö –∫–∞—Ä—Ç—ã –ø–∞–º—è—Ç–∏ (–ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –ø—Ä–∏ —á—Ç–µ–Ω–∏–∏ —Å–µ–∫—Ç–æ—Ä–æ–≤ –∫–∞—Ä—Ç—ã)
- smap__signature - SMAP —Å–∏–≥–Ω–∞—Ç—É—Ä–∞ (–ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –ø—Ä–∏ —á—Ç–µ–Ω–∏–∏ —Å–µ–∫—Ç–æ—Ä–æ–≤ –∫–∞—Ä—Ç—ã)
- xlat__table db '0123456789ABCDEF' - —Ç–∞–±–ª–∏—Ü–∞ –¥–ª—è –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è –∑–Ω–∞—á–µ–Ω–∏—è —Ä–µ–≥–∏—Å—Ç—Ä–∞ –≤ ASCII-–∫–æ–¥ (–ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –ø—Ä–∏ —á—Ç–µ–Ω–∏–∏ —Å–µ–∫—Ç–æ—Ä–æ–≤ –∫–∞—Ä—Ç—ã –∏ –≤—ã–≤–æ–¥–µ —Å–∫–∞–Ω –∫–æ–¥–æ–≤ –∫–ª–∞–≤–∏—à)
- table__pointer dw 820h - –∫—É—Ä—Å–æ—Ä —Ç–∞–±–ª–∏—Ü—ã, –ø–æ–º–æ–≥–∞—é—â–∏–π –ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞—Ç—å —Å—Ç—Ä–æ–∫–∏ (–ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –ø—Ä–∏ —á—Ç–µ–Ω–∏–∏ —Å–µ–∫—Ç–æ—Ä–æ–≤ –∫–∞—Ä—Ç—ã)
- timer__value dw 0 - –∑–Ω–∞—á–µ–Ω–∏–µ —Ç–∞–π–º–µ—Ä–∞
- timer__value__string db '' - —Å—Ç—Ä–æ–∫–∞, –≤ –∫–æ—Ç–æ—Ä—É—é –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ—Ç—Å—è –∑–Ω–∞—á–µ–Ω–∏–µ —Ç–∞–π–º–µ—Ä–∞ –¥–ª—è –≤—ã–≤–æ–¥–∞ –Ω–∞ —ç–∫—Ä–∞–Ω
- off__08h equ 08hx4 (–≥–¥–µ 'x' - —É–º–Ω–æ–∂–µ–Ω–∏–µ, —Ç.–∫. .md –ø—Ä–∏–Ω–∏–º–∞–µ—Ç —Å–∏–º–≤–æ–ª –∑–≤—ë–∑–¥–æ—á–∫–∏ –∑–∞ —É–∫–∞–∑–∞—Ç–µ–ª—å –Ω–∞ –∫—É—Ä—Å–∏–≤) - –∫–æ–Ω—Å—Ç–∞–Ω—Ç–∞ —Å–¥–≤–∏–≥–∞ (—Ö–µ—Ä–Ω—è –¥–ª—è –≤–µ–∫—Ç–æ—Ä–∞ –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏–π, —É–¥–∞–ª—è—Ç—å –Ω–µ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è, –∏–±–æ –Ω–µ—Ö—É–π)
- off__09h equ 09hx4 (–≥–¥–µ 'x' - —É–º–Ω–æ–∂–µ–Ω–∏–µ, —Ç.–∫. .md –ø—Ä–∏–Ω–∏–º–∞–µ—Ç —Å–∏–º–≤–æ–ª –∑–≤—ë–∑–¥–æ—á–∫–∏ –∑–∞ —É–∫–∞–∑–∞—Ç–µ–ª—å –Ω–∞ –∫—É—Ä—Å–∏–≤) - –∫–æ–Ω—Å—Ç–∞–Ω—Ç–∞ —Å–¥–≤–∏–≥–∞ (—Ö–µ—Ä–Ω—è –¥–ª—è –≤–µ–∫—Ç–æ—Ä–∞ –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏–π, —É–¥–∞–ª—è—Ç—å –Ω–µ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è, –∏–±–æ –Ω–µ—Ö—É–π)

–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ old__offset –∏ old__segment –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω—ã –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –æ –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏—è—Ö 08h –∏ 09h, –∫–æ—Ç–æ—Ä—ã–µ –±—ã–ª–∏ –∑–∞–º–µ–Ω–µ–Ω—ã –≤ –Ω–∞—á–∞–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–≥—Ä—É–∑—á–∏–∫–∞.

# MDBoot (boot-file) üíæ [en - Google Translater]
## Launch the emulator ‚ö°
The repository already includes all the required files. To start the bootloader:
- Run the file "bochs.exe"
- In the window that opens, click the "Load" button
- Select the "bochsrc" file as the configuration file
- Click the "Start" button

## Emulator files üìë
- bochs.exe - emulator
- bochsdbg.exe - emulator with debugger
- bochsrc - standard configuration
- bochsrc_dbg - configuration for debugger
- boot.ASM - uncompiled bootloader code
- boot.BIN - compiled bootloader code
- disk.img - boot image
- FASMW.exe - code editor
- writeDisk.bat - operates with dd and fsutil utilities to create a bootable image

## Modification of the program code üîß
To modify the program code:
- Run FASMW (or any other program that can compile the file)
- Open the boot.ASM file
- Make changes to the code
- Compile it (in FASMW "Run" -> "Compile")
- Run writeDisk.bat
- Wait until the end of the process (the disk.img file will overwrite itself)
- Start the emulator and check your development

## Debugging program code üîé
To perform the code debugging procedure:
- Run FASMW (or any other program that can compile the file)
- Open the boot.ASM file
- Set the breakpoint in the required place (enter 'xchg bx, bx')
- Compile it (in FASMW "Run" -> "Compile")
- Run writeDisk.bat
- Wait until the end of the process (the disk.img file will overwrite itself)
- Start the emulator (! Bochsdbg), select borchs_dbg as the configuration file and carry out the debugging procedure (to go to the breakpoint, press the 'Continue' button, for a single step, press the 'Step' button)

## Description of blocks (sequentially from the beginning of the program to the end) üìö
- boot__code16 - required part of the bootloader
- boot__continuation - continuation of the boot code execution after the required part has been completed
- timer__int - timer interrupt code
- convert__timer__value - interrupt execution: converting the timer value to a string of numbers
- timer__value__out - interrupt execution: output of the converted timer string
- keyboard__int - keyboard interrupt code
- reboot - interrupt execution: reboot the emulator (Ctrl + Break)
- no__reboot - interrupt execution: without rebooting the emulator
- ints__install - install interrupts
- clear__display - clear the display
- welcome - display a welcome message
- check__floppy - check for a floppy drive
- have__floppy - if a floppy drive is connected
- have__floppy__out - display a message about a connected floppy drive
- no__floppy - if no floppy drive is connected
- no__floppy__out - display a message about the absence of a floppy drive
- check__coprocessor - check for the presence of a coprocessor
- have__coprocessor - if coprocessor is installed
- have__coprocessor__out - display a message about the installed coprocessor
- no__coprocessor - if coprocessor is not installed
- no__coprocessor__out - display a message about not installed coprocessor
- check__ram__size - check the amount of RAM
- ram__size__out - prefix output
- ram__size__value__out - value output
- check__video__mode - check the video mode
- video__mode__out - prefix output
- check__mode__40x25__color - check for modes (there was a mistake in the block name, this check processes all video modes, not just "40x25 Color")
- mode__40x25__color__out - displays a message about the video mode "40x25 Color"
- mode__80x25__color__out - displays a message about the video mode "80x25 Color"
- mode__80x25__mono__out - displays a message about the video mode "80x25 Mono"
- check__number__of__floppy - check the number of floppy drives
- number__of__floppy__out - prefix output
- number__of__floppy__value__out - display value
- check__dma - check DMA
- dma__enable - if DMA is enabled
- dma__enable__out - display a message about enabled DMA
- dma__disable - if DMA is disabled
- dma__disable__out - display a message about disabled DMA
- number__of__rs232__cards - check the number of RS-232 cards
- number__of__rs232__cards__out - prefix output
- number__of__rs232__cards__value__out - value output
- check__game__port - check "Game port"
- game__port__enable - if "Game port" is enabled
- game__port__enable__out - displays a message about the enabled "Game port"
- game__port__disable - if "Game port" is disabled
- game__port__disable__out - displays a message about disabled "Game port"
- check__internal__modem - check for a built-in modem
- internal__modem__installed - if the modem is installed
- internal__modem__installed__out - displays a message about the installed modem
- internal__modem__not__installed - if the modem is not installed
- internal__modem__not__installed__out - displays a message about the absence of a modem
- number__of__printers__attached - check the number of connected printers
- number__of__printers__attached__out - prefix output
- number__of__printers__attached__value__out - value output
- card__map__header - display the header for the table of sectors of the memory card
- card__map__read__start - preparation for getting information about sectors
- card__map__reading - getting information about sectors using int 0x15 ax = 0E820h
- base__addr__high__out - BaseAddrHigh output
- base__addr__low__out - BaseAddrLow output
- length__high__out - output LengthHigh
- length__low__out - Output of LengthLow
- type__is__arm - checking the type for "ARM"
- type__is__arr - checking the type for "ARR"
- type__is__udf - type check for "UDF" (undefined)
- type__out - type inference and check for termination of the reading process
- terminate - termination of execution (timer and keyboard interrupts are still working)

## Variables üìã
Most of the variables represent a string and its length. In this loader, this is necessary for the purpose of displaying. Therefore, only the variables that stand out among them will be described:
- buffer db 20 dup (?) - buffer for storing data about the sectors of the memory card (used when reading the sectors of the card)
- smap__signature - SMAP signature (used when reading map sectors)
- xlat__table db '0123456789ABCDEF' - a table for converting the register value to ASCII code (used when reading card sectors and outputting scanned key codes)
- table__pointer dw 820h - table cursor that helps position rows (used when reading map sectors)
- timer__value dw 0 - timer value
- timer__value__string db '' - a string into which the timer value is converted to be displayed on the screen
- off__08h equ 08hx4 (where 'x' is multiplication, since .md takes an asterisk as a pointer to italics) - shift constant (bullshit for the interrupt vector, it is not recommended to delete it, because fuck it)
- off__09h equ 09hx4 (where 'x' is multiplication, since .md takes an asterisk as a pointer to italics) - shift constant (bullshit for the interrupt vector, it is not recommended to delete, because fuck it)
